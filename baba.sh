#!/usr/bin/env bash
# shellcheck disable=SC2034

texture_0=(
"                        "
"                        "
"               WW       "
"         WW    WW       "
"         WWW   WWW      "
"         WWW   WWW      "
"     WWWWWWWWWWWWWWW    "
"    WWWWWWWWWWWWWWWWW   "
"   WWWWWWWWWWWWWWWBBWW  "
"   WWWWWWWWWWWWWWWBBWW  "
"   WWWWWWWWWWWBBWWWWWW  "
"   WWWWWWWWWWWBBWWWWWW  "
"   WWWWWWWWWWWWWWWWWWW  "
"    WWWWWWWWWWWWWWWWWW  "
"    WWWWWWWWWWWWWWWWW   "
"    WWWWWWWWWWWWWWWWWW  "
"  WWWW WWW     WWW  WWW "
" WWWWWWWW       WWW  WWW"
" WW  WWW         WW   WW"
"                        "
"                        "
"                        "
"                        "
"                        "
)

texture_1=(
"                        "
"                        "
"                        "
"          WW    WW      "
"          WWW   WW      "
"          WWW   WW      "
"     WWWWWWWWWWWWWW     "
"    WWWWWWWWWWWWWWWW    "
"    WWWWWWWWWWWWWBBWW   "
"   WWWWWWWWWWWWWWBBWW   "
"   WWWWWWWWWWWBBWWWWW   "
"   WWWWWWWWWWWBBWWWWW   "
"    WWWWWWWWWWWWWWWWW   "
"    WWWWWWWWWWWWWWWWW   "
"    WWWWWWWWWWWWWWWWW   "
"    WWWWWWWWWWWWWWWWWW  "
"   WWWWWWW     WWWW WWWW"
" WWWW WWW       WWW  WWW"
" WW   WW         WW     "
"                        "
"                        "
"                        "
"                        "
"                        "
)

texture_2=(
"                        "
"                        "
"          WW            "
"          WW   WW       "
"          WWW  WWW      "
"          WWW  WWW      "
"      WWWWWWWWWWWW      "
"    WWWWWWWWWWWWWWWW    "
"   WWWWWWWWWWWWWWWWWW   "
"   WWWWWWWWWWWWWWWBBW   "
"   WWWWWWWWWWWWWWWBBWW  "
"   WWWWWWWWWWWBBWWWWWW  "
"   WWWWWWWWWWWBBWWWWWW  "
"    WWWWWWWWWWWWWWWWWW  "
"    WWWWWWWWWWWWWWWWWW  "
"   WWWWWWWWWWWWWWWWWWW  "
"  WWW WWWWWWWWWWWWWWWWW "
" WWW WWW        WWWW WWW"
" WW  WWW         WWW  WW"
"                  WW    "
"                        "
"                        "
"                        "
"                        "
)

texture_3=(
"                        "
"                        "
"                        "
"               WW       "
"         WW    WW       "
"         WWW   WWW      "
"         WWW   WWW      "
"     WWWWWWWWWWWWWWW    "
"    WWWWWWWWWWWWWWWWW   "
"   WWWWWWWWWWWWWWWBBWW  "
"   WWWWWWWWWWWWWWWBBWW  "
"   WWWWWWWWWWWBBWWWWWW  "
"   WWWWWWWWWWWBBWWWWWW  "
"   WWWWWWWWWWWWWWWWWWW  "
"    WWWWWWWWWWWWWWWWWW  "
"    WWWWWWWWWWWWWWWWW   "
"     WWWWWWWWWWWWWWWW   "
"     WW  WW   WW   WW   "
"    WWW  WW   WWW  WW   "
"    WWW  WW    WW  WW   "
"    WW   WW    WW  WW   "
"                        "
"                        "
"                        "
)

texture_4=(
"                        "
"                        "
"                        "
"                        "
"          WW    WW      "
"          WWW   WW      "
"          WWW   WW      "
"     WWWWWWWWWWWWWW     "
"    WWWWWWWWWWWWWWWW    "
"    WWWWWWWWWWWWWBBWW   "
"   WWWWWWWWWWWWWWBBWW   "
"   WWWWWWWWWWWBBWWWWW   "
"   WWWWWWWWWWWBBWWWWW   "
"    WWWWWWWWWWWWWWWWW   "
"    WWWWWWWWWWWWWWWWW   "
"     WWWWWWWWWWWWWWWW   "
"     WW WWWWWWWWWWWW    "
"     WW  WW   WW  WW    "
"     WW WWW   WW  WWW   "
"     WW WWW   WW  WWW   "
"     WW WW    WW   WW   "
"                        "
"                        "
"                        "
)

texture_5=(
"                        "
"                        "
"                        "
"          WW            "
"          WW   WW       "
"          WWW  WWW      "
"          WWW  WWW      "
"      WWWWWWWWWWWW      "
"    WWWWWWWWWWWWWWWW    "
"   WWWWWWWWWWWWWWWWWW   "
"   WWWWWWWWWWWWWWWBBW   "
"   WWWWWWWWWWWWWWWBBWW  "
"   WWWWWWWWWWWBBWWWWWW  "
"   WWWWWWWWWWWBBWWWWWW  "
"    WWWWWWWWWWWWWWWWWW  "
"     WWWWWWWWWWWWWWWWW  "
"     WWWWWWWWWWWWWWWWW  "
"     WW WWWWWWWWWWWWW   "
"    WWW WWW   WWW  WW   "
"    WW  WW     WW  WW   "
"    WW  WW     WW  WW   "
"               WW       "
"                        "
"                        "
)

texture_6=(
"                        "
"                        "
"               WW       "
"         WW    WW       "
"         WWW   WWW      "
"         WWW   WWW      "
"     WWWWWWWWWWWWWWW    "
"    WWWWWWWWWWWWWWWWW   "
"   WWWWWWWWWWWWWWWBBWW  "
"   WWWWWWWWWWWWWWWBBWW  "
"   WWWWWWWWWWWBBWWWWWW  "
"   WWWWWWWWWWWBBWWWWWW  "
"   WWWWWWWWWWWWWWWWWWW  "
"    WWWWWWWWWWWWWWWWWW  "
"    WWWWWWWWWWWWWWWWW   "
"     WWWWWWWWWWWWWWWW   "
"      WWW WWWWWW  WWW   "
"      WWWWWWWWWW WWW    "
"       WWW WWWWWWWW     "
"        WW WWW WWW      "
"                        "
"                        "
"                        "
"                        "
)

texture_7=(
"                        "
"                        "
"                        "
"          WW    WW      "
"          WWW   WW      "
"          WWW   WW      "
"     WWWWWWWWWWWWWW     "
"    WWWWWWWWWWWWWWWW    "
"    WWWWWWWWWWWWWBBWW   "
"   WWWWWWWWWWWWWWBBWW   "
"   WWWWWWWWWWWBBWWWWW   "
"   WWWWWWWWWWWBBWWWWW   "
"    WWWWWWWWWWWWWWWWW   "
"    WWWWWWWWWWWWWWWWW   "
"     WWWWWWWWWWWWWWWW   "
"     WWWWWWWWWWWWWWW    "
"      WWW WW WWW WWW    "
"       WWWWWWWWWWWWW    "
"       WWWWWWWWWWWW     "
"        WW WWW WWW      "
"                        "
"                        "
"                        "
"                        "
)

texture_8=(
"                        "
"                        "
"          WW            "
"          WW   WW       "
"          WWW  WWW      "
"          WWW  WWW      "
"      WWWWWWWWWWWW      "
"    WWWWWWWWWWWWWWWW    "
"   WWWWWWWWWWWWWWWWWW   "
"   WWWWWWWWWWWWWWWBBW   "
"   WWWWWWWWWWWWWWWBBWW  "
"   WWWWWWWWWWWBBWWWWWW  "
"   WWWWWWWWWWWBBWWWWWW  "
"    WWWWWWWWWWWWWWWWWW  "
"     WWWWWWWWWWWWWWWWW  "
"     WWWWWWWWWWWWWWWWW  "
"      WWWWWWWWWWWWWWW   "
"      WWWW   WW  WWW    "
"       WWWW WWW WWW     "
"        WWWWWW WWW      "
"         WWWWW WW       "
"                        "
"                        "
"                        "
)

textures=(
texture_0
texture_1
texture_2
texture_3
texture_4
texture_5
texture_6
texture_7
texture_8
)

# that does not properly work in ssh and i dont care
if [[ "$COLORTERM" =~ (truecolor|24bit) ]]; then
    truecolor=1
else
    truecolor=0
fi

if [[ "$truecolor" == 1 ]]; then
    FG_BLACK='\033[38;2;08;08;08m'
    FG_WHITE='\033[38;2;255;255;255m'
    BG_BLACK='\033[48;2;08;08;08m' # baba's eyes are #080808 according to ric idk
else
    FG_BLACK='\033[30m'
    FG_WHITE='\033[37m'
    BG_BLACK='\033[40m'
fi

BG_RESET='\033[49m'

print_sprite() {
    local -n sprite=$1
    local text=""

    for ((y=0; y<24; y+=2)); do
        top="${sprite[y]}"
        bottom="${sprite[y+1]}"

        for ((x=0; x<24; x++)); do
            t="${top:$x:1}"
            b="${bottom:$x:1}"

            if [[ "$t" == "W" && "$b" == "W" ]]; then
                text+="${FG_WHITE}█"
            elif [[ "$t" == "W" && "$b" == "B" ]]; then
                text+="${FG_WHITE}${BG_BLACK}▀"
            elif [[ "$t" == "W" && "$b" == " " ]]; then
                text+="${FG_WHITE}${BG_RESET}▀"
            elif [[ "$t" == "B" && "$b" == "W" ]]; then
                text+="${FG_WHITE}${BG_BLACK}▄"
            elif [[ "$t" == "B" && "$b" == "B" ]]; then
                text+="${BG_BLACK} "
            elif [[ "$t" == "B" && "$b" == " " ]]; then
                text+="${FG_WHITE}${BG_RESET}▄"
            elif [[ "$t" == " " && "$b" == "W" ]]; then
                text+="${BG_RESET}${FG_WHITE}▄"
            elif [[ "$t" == " " && "$b" == "B" ]]; then
                text+="${BG_RESET}${FG_BLACK}▄"
            elif [[ "$t" == " " && "$b" == " " ]]; then
                text+="${BG_RESET} "
            else
                text+=" "
            fi
        done
        text+="\n"
    done
    echo -ne "$text"
}

trap 'echo -ne "\e[?25h"; exit' INT TERM

echo -ne "\e[?25l"
while true; do
    for i in 0 3 6 4 1 5 7 3 2 4 8 5; do
        name="${textures[$i]}"
        print_sprite "$name"
        sleep 0.1
       echo -ne "\033[12A"
    done
done
